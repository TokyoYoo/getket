<%- include('layout', { 
    title: title,
    body: `
        <div class="container">
            <div class="card checkpoint-card">
                <h1>Checkpoint ${checkpointNumber}</h1>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progress}%"></div>
                </div>
                
                <div class="info-box">
                    <h3>Verification Step ${checkpointNumber} of 3</h3>
                    <p>${message}</p>
                </div>
                
                <div class="checkpoint-info">
                    <h4>Progress:</h4>
                    <ul>
                        <li>
                            ✅ Checkpoint 1 
                            ${checkpointNumber >= 1 ? '<span class="status-badge status-active">Current</span>' : ''}
                        </li>
                        <li>
                            ${checkpointNumber >= 2 ? '✅' : '⏳'} Checkpoint 2
                            ${checkpointNumber === 2 ? '<span class="status-badge status-active">Current</span>' : ''}
                        </li>
                        <li>
                            ${checkpointNumber >= 3 ? '✅' : '⏳'} Checkpoint 3
                            ${checkpointNumber === 3 ? '<span class="status-badge status-active">Current</span>' : ''}
                        </li>
                        <li>
                            ${checkpointNumber > 3 ? '✅' : '⏳'} Access Key Generation
                        </li>
                    </ul>
                </div>
                
                <div class="warning-box">
                    <strong>Important:</strong> You must complete the verification through the official link below. 
                    Do not attempt to skip or bypass this step.
                </div>
                
                <!-- Linkvertise Button - The ONLY way to proceed -->
                <a href="${nextUrl}" class="btn" id="verification-btn">
                    Complete Verification Step ${checkpointNumber}
                </a>
                
                <div class="info-box" style="margin-top: 30px;">
                    <h4>How it works:</h4>
                    <ol style="text-align: left;">
                        <li>Click the verification button above</li>
                        <li>Complete the verification process</li>
                        <li>Wait for automatic redirect</li>
                        <li>Continue to the next checkpoint</li>
                    </ol>
                </div>
                
                ${checkpointNumber === 1 ? `
                    <div style="margin-top: 20px;">
                        <a href="/checkpoint/reset" class="btn btn-secondary">Reset Progress</a>
                    </div>
                ` : ''}
            </div>
        </div>
        
        <script>
            // Track verification button clicks
            document.getElementById('verification-btn').addEventListener('click', function() {
                this.innerHTML = '<span class="loading"></span> Processing...';
                this.style.pointerEvents = 'none';
                
                // Re-enable after 5 seconds in case of issues
                setTimeout(() => {
                    this.innerHTML = 'Complete Verification Step ${checkpointNumber}';
                    this.style.pointerEvents = 'auto';
                }, 5000);
            });
            
            // Prevent right-click context menu on verification button
            document.getElementById('verification-btn').addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // Prevent keyboard shortcuts that might bypass verification
            document.addEventListener('keydown', function(e) {
                // Disable F12, Ctrl+Shift+I, Ctrl+U, etc.
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                    (e.ctrlKey && e.key === 'u')) {
                    e.preventDefault();
                    return false;
                }
            });
            
            // Disable drag and drop on verification button
            document.getElementById('verification-btn').addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });
        </script>
    `
}) %>